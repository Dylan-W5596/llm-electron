# 後端架構審查 (Backend Review)

## 檔案總覽

### `backend/main.py`
這是 FastAPI 應用程式的入口點與控制器。
- **功能**:
    - 初始化資料庫與 AI 引擎。
    - **路由管理**: 管理包括對話、訊息、群組管理及跨群組移動等 10+ 個端點。
- **關鍵點**:
    - 輸出捕捉：其標準輸出將被 Electron 主進程捕獲並轉發至監控視窗。

### `backend/model_engine.py`
封裝了 LLM 的推論邏輯。
- **功能**:
    - 載入 Llama 3.2 1B (GGUF 格式)。
    - **硬體加速**: 支援 CUDA 卸載。
    - **推論細節**: 透過後端日誌輸出詳細的 Token 計數與推論延遲，便於監控。

### `backend/database.py`
提供持久化存儲與關聯查詢。
- **技術特色**: 完美支持級聯刪除 (Cascading Delete)，刪除群組或會話時能自動清理關聯的訊息或會話權屬。

---

## 研發亮點：即時運算監控 (Developer Visibility)
- **原理**: 後端腳本無需修改，Electron 透過 `child_process.spawn` 的 `stdio` 接口直接讀取實體標準輸出字串。
- **應用**: 透過此機制，開發者在「監控視窗」中觀察到的日誌，與在實體 Terminal 中看到的完全一致，大幅降低除錯成本。

---
**最後更新**: 2026-01-28  
**狀態**: 已同步 Alpha 0.0.3 架構。
